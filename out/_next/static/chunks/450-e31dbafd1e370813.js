(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{4508:e=>{e.exports={container:"TutorProfile_container__buRby",mainContent:"TutorProfile_mainContent__pCn_Q",header:"TutorProfile_header__bCtDd",headerContent:"TutorProfile_headerContent__dcymj",headerNav:"TutorProfile_headerNav__Awg_z",headerTitle:"TutorProfile_headerTitle__S0Kfg",settingsButton:"TutorProfile_settingsButton__hOEHK",settingsIcon:"TutorProfile_settingsIcon__Hd_lT",profileHeader:"TutorProfile_profileHeader__FgYDn",profileInfo:"TutorProfile_profileInfo__ON9yy",avatar:"TutorProfile_avatar__hlmqN",profileDetails:"TutorProfile_profileDetails__eKDpT",profileName:"TutorProfile_profileName__bo1Nd",profileEmail:"TutorProfile_profileEmail__tIGo6",profileBio:"TutorProfile_profileBio__JRouE",statsGrid:"TutorProfile_statsGrid___SG85",statCard:"TutorProfile_statCard__BMKN_",statContent:"TutorProfile_statContent__HHkPe",statIcon:"TutorProfile_statIcon__JgRxr",statIconBlue:"TutorProfile_statIconBlue__U1w5G",statIconGreen:"TutorProfile_statIconGreen__6CznE",statIconOrange:"TutorProfile_statIconOrange__B8JPW",statIconPurple:"TutorProfile_statIconPurple__fkn9b",statValue:"TutorProfile_statValue____AsR",statLabel:"TutorProfile_statLabel__amsqB",iconSize:"TutorProfile_iconSize__X8Yoj",microsoftSection:"TutorProfile_microsoftSection__8Rump",microsoftConnection:"TutorProfile_microsoftConnection__6k1yj",errorMessage:"TutorProfile_errorMessage__ummBe",errorText:"TutorProfile_errorText__JAQCa",microsoftContent:"TutorProfile_microsoftContent__0FGl8",microsoftIconContainer:"TutorProfile_microsoftIconContainer__SKUno",microsoftLogo:"TutorProfile_microsoftLogo__aV_5A",microsoftText:"TutorProfile_microsoftText__U4_HL",microsoftTitle:"TutorProfile_microsoftTitle__vV6kd",connectionStatus:"TutorProfile_connectionStatus__z5OF4",connectedStatus:"TutorProfile_connectedStatus__iVZdE",checkIcon:"TutorProfile_checkIcon__k9FsO",connectedText:"TutorProfile_connectedText__G7UEN",disconnectedStatus:"TutorProfile_disconnectedStatus__0JXaF",disconnectedText:"TutorProfile_disconnectedText__NP3kt",userInfo:"TutorProfile_userInfo__oDbZ2",userName:"TutorProfile_userName__PoIYa",userEmail:"TutorProfile_userEmail__3d8uG",statusDescription:"TutorProfile_statusDescription__2OXKd",microsoftActions:"TutorProfile_microsoftActions__UNNH1",connectButton:"TutorProfile_connectButton__8u2Op",disconnectButton:"TutorProfile_disconnectButton___5bCR",buttonLoading:"TutorProfile_buttonLoading__q8H4G",buttonSpinner:"TutorProfile_buttonSpinner__XlGcR",spin:"TutorProfile_spin__MoUOM",loadingSpinner:"TutorProfile_loadingSpinner__BexQw",loadingText:"TutorProfile_loadingText__IBTAT",infoSection:"TutorProfile_infoSection__x0LuW",infoIcon:"TutorProfile_infoIcon__WxZHt",infoIconSvg:"TutorProfile_infoIconSvg__WEEMW",infoText:"TutorProfile_infoText___z626",notTutorMessage:"TutorProfile_notTutorMessage__3Zylo",roleSelection:"TutorProfile_roleSelection__AALs7",roleTitle:"TutorProfile_roleTitle__VBsEl",roleDropdownContainer:"TutorProfile_roleDropdownContainer__B5YGk",selectedInfo:"TutorProfile_selectedInfo__SPpHl",selectedText:"TutorProfile_selectedText__QpNId",selectedRole:"TutorProfile_selectedRole__dvRYD",dropdown:"TutorProfile_dropdown__2gryl",dropdownButton:"TutorProfile_dropdownButton__lYPbH",dropdownText:"TutorProfile_dropdownText__5hVAR",chevron:"TutorProfile_chevron__8PeM8",chevronOpen:"TutorProfile_chevronOpen__apVW2",dropdownMenu:"TutorProfile_dropdownMenu__8TbJC",dropdownOption:"TutorProfile_dropdownOption__JG_z6",contentGrid:"TutorProfile_contentGrid__fep88",infoBox:"TutorProfile_infoBox__Y46Nr",infoBoxGradient1:"TutorProfile_infoBoxGradient1__FujJF",infoBoxGradient2:"TutorProfile_infoBoxGradient2__hfama",infoBoxGradient3:"TutorProfile_infoBoxGradient3__9Dem4",infoBoxGradient4:"TutorProfile_infoBoxGradient4__k9VnX",infoBoxGradient5:"TutorProfile_infoBoxGradient5__7iLhK",infoBoxTitle:"TutorProfile_infoBoxTitle__4Ow_s",infoBoxContent:"TutorProfile_infoBoxContent__JwLmb",quickActions:"TutorProfile_quickActions__t3Sdm",quickActionsTitle:"TutorProfile_quickActionsTitle__X8y0i",actionsGrid:"TutorProfile_actionsGrid__5UvjC",actionCard:"TutorProfile_actionCard__xV_4Z",actionIcon:"TutorProfile_actionIcon__cljH_",actionTitle:"TutorProfile_actionTitle__rIfcq",actionDescription:"TutorProfile_actionDescription__05vdy",microsoftIcon:"TutorProfile_microsoftIcon__XsgKZ",fadeInUp:"TutorProfile_fadeInUp__YWx2d"}},9450:(e,o,s)=>{"use strict";s.r(o),s.d(o,{TutorProfile:()=>P,default:()=>y});var t=s(7876),n=s(4232),i=s(822),r=s(3569),a=s(9116),l=s(710),c=s(2671),d=s(5952),u=s(9518),_=s(3654),f=s(6124),m=s(4508),x=s.n(m),h=s(9999),j=s(9249);let T=["Students","Subjects","Past Lessons","Upcoming Lessons","Reviews"],p=e=>{let{label:o,options:s,selected:r,onChange:a}=e,[l,c]=(0,n.useState)(!1);return(0,t.jsxs)("div",{className:x().dropdown,children:[(0,t.jsxs)("button",{onClick:()=>c(!l),className:x().dropdownButton,children:[(0,t.jsx)("span",{className:x().dropdownText,children:r}),(0,t.jsx)(i.A,{className:"".concat(x().chevron," ").concat(l?x().chevronOpen:"")})]}),l&&(0,t.jsx)("div",{className:x().dropdownMenu,children:s.map(e=>(0,t.jsx)("button",{onClick:()=>{a(e),c(!1)},className:x().dropdownOption,children:e},e))})]})},N=()=>{let{userProfile:e,linkMicrosoftToAccount:o,updateUserProfile:s,error:i,clearError:a}=(0,h.ur)(),[l,c]=(0,n.useState)({isConnected:!1,userInfo:null,loading:!0,error:null}),[d,u]=(0,n.useState)(!1);n.useEffect(()=>{_()},[e]);let _=()=>{if(!e)return void c({isConnected:!1,loading:!1,userInfo:null,error:null});let o=e.microsoftAuth;(null==o?void 0:o.accessToken)&&(null==o?void 0:o.userInfo)?c({isConnected:!0,userInfo:o.userInfo,loading:!1,error:null}):c({isConnected:!1,loading:!1,userInfo:null,error:null})},f=async()=>{u(!0),a();try{await o()}catch(e){console.error("Error linking Microsoft account:",e),c(e=>({...e,error:"Failed to connect Microsoft account"}))}finally{u(!1)}},m=async()=>{if(confirm("Are you sure you want to disconnect your Microsoft account? This will disable Teams meeting creation."))try{u(!0),await s({microsoftAuth:null}),c({isConnected:!1,loading:!1,userInfo:null,error:null})}catch(e){console.error("Error disconnecting Microsoft account:",e),c(e=>({...e,error:"Failed to disconnect Microsoft account"}))}finally{u(!1)}};return l.loading?(0,t.jsx)("div",{className:x().microsoftConnection,children:(0,t.jsxs)("div",{className:x().microsoftContent,children:[(0,t.jsx)("div",{className:x().microsoftIcon,children:(0,t.jsx)("div",{className:x().loadingSpinner})}),(0,t.jsx)("div",{className:x().microsoftText,children:(0,t.jsx)("span",{className:x().loadingText,children:"Checking Microsoft account status..."})})]})}):(0,t.jsxs)("div",{className:x().microsoftConnection,children:[(i||l.error)&&(0,t.jsx)("div",{className:x().errorMessage,children:(0,t.jsx)("p",{className:x().errorText,children:i||l.error})}),(0,t.jsxs)("div",{className:x().microsoftContent,children:[(0,t.jsx)("div",{className:x().microsoftIconContainer,children:(0,t.jsxs)("svg",{className:x().microsoftLogo,viewBox:"0 0 23 23",fill:"none",children:[(0,t.jsx)("path",{d:"M0 0h11v11H0z",fill:"#f25022"}),(0,t.jsx)("path",{d:"M12 0h11v11H12z",fill:"#7fba00"}),(0,t.jsx)("path",{d:"M0 12h11v11H0z",fill:"#00a4ef"}),(0,t.jsx)("path",{d:"M12 12h11v11H12z",fill:"#ffb900"})]})}),(0,t.jsxs)("div",{className:x().microsoftText,children:[(0,t.jsx)("h3",{className:x().microsoftTitle,children:"Microsoft Account"}),l.isConnected?(0,t.jsxs)("div",{className:x().connectionStatus,children:[(0,t.jsxs)("div",{className:x().connectedStatus,children:[(0,t.jsx)(r.A,{className:x().checkIcon}),(0,t.jsx)("span",{className:x().connectedText,children:"Connected"})]}),l.userInfo&&(0,t.jsxs)("div",{className:x().userInfo,children:[(0,t.jsx)("p",{className:x().userName,children:l.userInfo.displayName}),(0,t.jsx)("p",{className:x().userEmail,children:l.userInfo.mail||l.userInfo.userPrincipalName})]}),(0,t.jsx)("p",{className:x().statusDescription,children:"Teams meetings will be created automatically for new bookings"})]}):(0,t.jsxs)("div",{className:x().connectionStatus,children:[(0,t.jsx)("div",{className:x().disconnectedStatus,children:(0,t.jsx)("span",{className:x().disconnectedText,children:"âš  Not connected"})}),(0,t.jsx)("p",{className:x().statusDescription,children:"Connect to automatically create Teams meetings for your lessons"})]})]}),(0,t.jsx)("div",{className:x().microsoftActions,children:l.isConnected?(0,t.jsx)("button",{onClick:m,disabled:d,className:x().disconnectButton,children:d?(0,t.jsxs)("div",{className:x().buttonLoading,children:[(0,t.jsx)("div",{className:x().buttonSpinner}),(0,t.jsx)("span",{children:"Disconnecting..."})]}):"Disconnect"}):(0,t.jsx)("button",{onClick:f,disabled:d,className:x().connectButton,children:d?(0,t.jsxs)("div",{className:x().buttonLoading,children:[(0,t.jsx)("div",{className:x().buttonSpinner}),(0,t.jsx)("span",{children:"Connecting..."})]}):"Connect Account"})})]}),(null==e?void 0:e.userType)==="tutor"&&(0,t.jsxs)("div",{className:x().infoSection,children:[(0,t.jsx)("div",{className:x().infoIcon,children:(0,t.jsx)("svg",{className:x().infoIconSvg,fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,t.jsx)("p",{className:x().infoText,children:"Connecting your Microsoft account enables automatic Teams meeting creation for all your tutoring sessions."})]})]})},v=e=>{let{icon:o,label:s,value:n,color:i="blue",loading:r=!1}=e;return(0,t.jsx)("div",{className:x().statCard,children:(0,t.jsxs)("div",{className:x().statContent,children:[(0,t.jsx)("div",{className:"".concat(x().statIcon," ").concat(x()["statIcon".concat(i.charAt(0).toUpperCase()+i.slice(1))]),children:(0,t.jsx)(o,{className:x().iconSize})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:x().statValue,children:r?"...":n}),(0,t.jsx)("p",{className:x().statLabel,children:s})]})]})})},g=e=>{let{title:o,content:s,index:n}=e;return(0,t.jsxs)("div",{className:"".concat(x().infoBox," ").concat(x()["infoBoxGradient".concat(n%5+1)]),children:[(0,t.jsx)("h4",{className:x().infoBoxTitle,children:o}),(0,t.jsx)("p",{className:x().infoBoxContent,children:s})]})},P=()=>{var e,o,s;let[i,r]=(0,n.useState)(T[0]),{user:m,userType:P,userProfile:y,tutorProfile:I}=(0,h.ur)(),{fetchTotalStatistics:w,fetchWeeklyStatistics:S}=(0,j.q)(),[k,b]=(0,n.useState)({totalEarnings:0,totalHours:0,totalStudents:0}),[C,A]=(0,n.useState)({weeklyEarnings:0,weeklyHours:0,weeklyLessons:0}),[B,E]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{E(!0);try{let[e,o]=await Promise.all([w(),S()]);b(e),A(o)}catch(e){console.error("Error loading profile statistics:",e)}finally{E(!1)}})()},[w,S]);let M=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),H=e=>{if(0===e)return"0";if(e<1)return"".concat(Math.round(60*e),"m");let o=Math.floor(e),s=Math.round((e-o)*60);return 0===s?"".concat(o,"h"):"".concat(o,"h ").concat(s,"m")};return(0,t.jsxs)("div",{className:x().container,children:[(0,t.jsx)("div",{className:x().header,children:(0,t.jsx)("div",{className:x().headerContent,children:(0,t.jsx)("div",{className:x().headerNav,children:(0,t.jsx)("h1",{className:x().headerTitle,children:"Tutor Profile & Statistics"})})})}),(0,t.jsxs)("div",{className:x().mainContent,children:[(0,t.jsxs)("div",{className:x().profileHeader,children:[(0,t.jsxs)("div",{className:x().profileInfo,children:[(0,t.jsx)("div",{className:x().avatar,children:(null==y||null==(e=y.displayName)?void 0:e.split(" ").map(e=>e[0]).join(""))||"T"}),(0,t.jsxs)("div",{className:x().profileDetails,children:[(0,t.jsx)("h2",{className:x().profileName,children:(null==y?void 0:y.displayName)||"Tutor"}),(0,t.jsx)("p",{className:x().profileEmail,children:null==y?void 0:y.email}),(null==I?void 0:I.hourlyRate)&&(0,t.jsxs)("p",{className:x().hourlyRate,children:["Hourly Rate: ",M(I.hourlyRate)]})]})]}),(0,t.jsxs)("div",{className:x().statsGrid,children:[(0,t.jsx)(v,{icon:a.A,label:"Total Earnings",value:M(k.totalEarnings),color:"green",loading:B}),(0,t.jsx)(v,{icon:l.A,label:"Total Hours",value:H(k.totalHours),color:"purple",loading:B}),(0,t.jsx)(v,{icon:c.A,label:"Total Students",value:k.totalStudents,color:"blue",loading:B}),(0,t.jsx)(v,{icon:d.A,label:"Subjects",value:(null==I||null==(o=I.subjects)?void 0:o.length)||0,color:"orange",loading:B})]})]}),(0,t.jsxs)("div",{className:x().weeklySection,children:[(0,t.jsx)("h3",{className:x().sectionTitle,children:"This Week's Performance"}),(0,t.jsxs)("div",{className:x().weeklyStats,children:[(0,t.jsxs)("div",{className:x().weeklyStatItem,children:[(0,t.jsx)(u.A,{className:x().weeklyIcon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:x().weeklyLabel,children:"Weekly Earnings"}),(0,t.jsx)("p",{className:x().weeklyValue,children:B?"...":M(C.weeklyEarnings)})]})]}),(0,t.jsxs)("div",{className:x().weeklyStatItem,children:[(0,t.jsx)(l.A,{className:x().weeklyIcon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:x().weeklyLabel,children:"Weekly Hours"}),(0,t.jsx)("p",{className:x().weeklyValue,children:B?"...":H(C.weeklyHours)})]})]}),(0,t.jsxs)("div",{className:x().weeklyStatItem,children:[(0,t.jsx)(_.A,{className:x().weeklyIcon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:x().weeklyLabel,children:"Weekly Lessons"}),(0,t.jsx)("p",{className:x().weeklyValue,children:B?"...":C.weeklyLessons})]})]})]})]}),(0,t.jsx)("div",{className:x().microsoftSection,children:(0,t.jsx)(N,{})}),(0,t.jsxs)("div",{className:x().achievementsSection,children:[(0,t.jsx)("h3",{className:x().sectionTitle,children:"Achievements"}),(0,t.jsxs)("div",{className:x().achievementsGrid,children:[k.totalHours>=10&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(f.A,{className:x().achievementIcon,style:{color:"#fbbf24"}}),(0,t.jsx)("span",{children:"10+ Hours Teaching"})]}),k.totalHours>=50&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(f.A,{className:x().achievementIcon,style:{color:"#fbbf24"}}),(0,t.jsx)("span",{children:"50+ Hours Teaching"})]}),k.totalHours>=100&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(f.A,{className:x().achievementIcon,style:{color:"#fbbf24"}}),(0,t.jsx)("span",{children:"100+ Hours Master"})]}),k.totalStudents>=5&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(c.A,{className:x().achievementIcon,style:{color:"#60a5fa"}}),(0,t.jsx)("span",{children:"5+ Students"})]}),k.totalStudents>=10&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(c.A,{className:x().achievementIcon,style:{color:"#60a5fa"}}),(0,t.jsx)("span",{children:"10+ Students"})]}),k.totalEarnings>=5e3&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(a.A,{className:x().achievementIcon,style:{color:"#34d399"}}),(0,t.jsx)("span",{children:"R5k+ Earned"})]}),k.totalEarnings>=1e4&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(a.A,{className:x().achievementIcon,style:{color:"#34d399"}}),(0,t.jsx)("span",{children:"R10k+ Earned"})]}),k.totalEarnings>=5e4&&(0,t.jsxs)("div",{className:x().achievement,children:[(0,t.jsx)(a.A,{className:x().achievementIcon,style:{color:"#34d399"}}),(0,t.jsx)("span",{children:"R50k+ Top Earner"})]})]})]}),(0,t.jsxs)("div",{className:x().roleSelection,children:[(0,t.jsx)("h3",{className:x().roleTitle,children:"View Dashboard"}),(0,t.jsxs)("div",{className:x().roleDropdownContainer,children:[(0,t.jsx)(p,{label:"Select view",options:T,selected:i,onChange:r}),(0,t.jsx)("div",{className:x().selectedInfo,children:(0,t.jsxs)("p",{className:x().selectedText,children:["Currently viewing: ",(0,t.jsx)("span",{className:x().selectedRole,children:i})]})})]})]}),(0,t.jsxs)("div",{className:x().contentGrid,children:["Students"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{title:"Total Students",content:"You have taught ".concat(k.totalStudents," unique students since joining the platform."),index:0}),(0,t.jsx)(g,{title:"Active This Week",content:"".concat(C.weeklyLessons," lessons scheduled with students this week."),index:1}),(0,t.jsx)(g,{title:"Student Management",content:"View detailed profiles, track progress, and manage your student relationships.",index:2})]}),"Subjects"===i&&(null==I||null==(s=I.subjects)?void 0:s.map((e,o)=>(0,t.jsx)(g,{title:e,content:"You are qualified to teach ".concat(e,". Manage your subject expertise and curriculum here."),index:o},o))),"Past Lessons"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{title:"Total Hours Taught",content:"You have completed ".concat(H(k.totalHours)," of teaching."),index:0}),(0,t.jsx)(g,{title:"Total Earnings",content:"You have earned ".concat(M(k.totalEarnings)," from confirmed lessons."),index:1}),(0,t.jsx)(g,{title:"Lesson History",content:"View your complete teaching history and student feedback.",index:2})]}),"Upcoming Lessons"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{title:"This Week",content:"You have ".concat(C.weeklyLessons," lessons scheduled this week."),index:0}),(0,t.jsx)(g,{title:"Expected Earnings",content:"This week's expected earnings: ".concat(M(C.weeklyEarnings)),index:1}),(0,t.jsx)(g,{title:"Schedule Management",content:"Manage your upcoming lessons and availability.",index:2})]}),"Reviews"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{title:"Student Feedback",content:"View ratings and reviews from your students.",index:0}),(0,t.jsx)(g,{title:"Performance Metrics",content:"Based on ".concat(k.totalStudents," students taught."),index:1}),(0,t.jsx)(g,{title:"Improvement Areas",content:"Track your teaching performance and areas for growth.",index:2})]})]}),(0,t.jsxs)("div",{className:x().quickActions,children:[(0,t.jsx)("h3",{className:x().quickActionsTitle,children:"Quick Actions"}),(0,t.jsxs)("div",{className:x().actionsGrid,children:[(0,t.jsxs)("button",{className:x().actionCard,children:[(0,t.jsx)(_.A,{className:x().actionIcon}),(0,t.jsx)("p",{className:x().actionTitle,children:"Schedule Lesson"}),(0,t.jsx)("p",{className:x().actionDescription,children:"Book a new tutoring session"})]}),(0,t.jsxs)("button",{className:x().actionCard,children:[(0,t.jsx)(c.A,{className:x().actionIcon}),(0,t.jsx)("p",{className:x().actionTitle,children:"Manage Students"}),(0,t.jsx)("p",{className:x().actionDescription,children:"View and update student profiles"})]}),(0,t.jsxs)("button",{className:x().actionCard,children:[(0,t.jsx)(d.A,{className:x().actionIcon}),(0,t.jsx)("p",{className:x().actionTitle,children:"Course Materials"}),(0,t.jsx)("p",{className:x().actionDescription,children:"Upload and organize resources"})]})]})]})]})]})},y=P}}]);