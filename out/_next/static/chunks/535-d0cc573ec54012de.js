(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{5535:(e,o,i)=>{"use strict";i.r(o),i.d(o,{default:()=>x});var s=i(7876),n=i(4232),a=i(9999),t=i(9099),l=i(498),r=i(6739),c=i(672),d=i(9239),_=i(7446),u=i(2347),g=i(7897),m=i(2341),p=i(5997),f=i.n(p);let h=e=>{let{type:o,message:i,onClose:a}=e;(0,n.useEffect)(()=>{let e=setTimeout(()=>{a()},5e3);return()=>clearTimeout(e)},[a]);let t={success:(0,s.jsx)(l.A,{className:f().notificationIcon}),error:(0,s.jsx)(r.A,{className:f().notificationIcon}),info:(0,s.jsx)(r.A,{className:f().notificationIcon}),warning:(0,s.jsx)(r.A,{className:f().notificationIcon})};return(0,s.jsxs)("div",{className:"".concat(f().notification," ").concat(f()["notification".concat(o.charAt(0).toUpperCase()+o.slice(1))]),children:[t[o],(0,s.jsx)("span",{className:f().notificationMessage,children:i}),(0,s.jsx)("button",{onClick:a,className:f().notificationClose,children:(0,s.jsx)(c.A,{size:16})})]})},x=()=>{let e=(0,t.useRouter)(),[o,i]=(0,n.useState)(""),[l,p]=(0,n.useState)(""),[x,L]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null),[v,w]=(0,n.useState)(!1),[k,C]=(0,n.useState)(""),[I,A]=(0,n.useState)(""),[S,P]=(0,n.useState)(""),[B,E]=(0,n.useState)(""),{login:M,loginWithMicrosoft:O,user:T,userProfile:G,userType:H,error:D,clearError:z,isLoading:F,linkAccountWithPassword:W}=(0,a.ur)();(0,n.useEffect)(()=>{if(T&&G&&H){b({type:"success",message:"Login successful! Redirecting..."});setTimeout(()=>{e.push("/#/home")},1500)}},[T,G,H,e]),(0,n.useEffect)(()=>{D&&(D.includes("user-not-found")?b({type:"error",message:"No account found with this email address."}):D.includes("wrong-password")||D.includes("invalid-credential")?b({type:"error",message:"Incorrect password. Please try again."}):D.includes("too-many-requests")?b({type:"error",message:"Too many failed attempts. Please try again later."}):D.includes("network-request-failed")?b({type:"error",message:"Network error. Please check your connection."}):D.includes("Microsoft account not connected")?b({type:"warning",message:D}):D.includes("account-exists-with-different-credential")||b({type:"error",message:D}),z())},[D,z]);let Y=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(P(""),!0):(P("Please enter a valid email address"),!1):(P("Email is required"),!1),q=e=>e?e.length<6?(E("Password must be at least 6 characters"),!1):(E(""),!0):(E("Password is required"),!1),U=async e=>{e.preventDefault();let i=Y(o),s=q(l);if(i&&s){N(!0);try{await M(o,l)}catch(e){console.error("Login failed:",e)}finally{N(!1)}}},R=async()=>{N(!0),b({type:"info",message:"Connecting to Microsoft..."});try{await O()}catch(o){if(console.error("Microsoft login failed:",o),"auth/account-exists-with-different-credential"===o.code){var e;let i=null==(e=o.customData)?void 0:e.email;i&&(C(i),w(!0),b(null))}else"auth/popup-blocked"===o.code?b({type:"error",message:"Popup blocked. Please allow popups for this site."}):b({type:"error",message:"Microsoft sign-in failed. Please try again."})}finally{N(!1)}},X=async()=>{if(!I)return void b({type:"warning",message:"Please enter your password"});N(!0);try{if(W){let e=await W(k,I);e.success?(w(!1),b({type:"success",message:"Accounts linked! Please sign in with Microsoft again."}),A("")):b({type:"error",message:e.message||"Failed to link accounts"})}else await M(k,I),w(!1),b({type:"info",message:"Please try Microsoft login again to complete linking"})}catch(e){console.error("Failed to link account:",e),b({type:"error",message:"Failed to link accounts. Please check your password."})}finally{N(!1)}},Z=F||j;return(0,s.jsxs)("div",{className:f().pageContainer,children:[(0,s.jsxs)("div",{className:f().backgroundAnimation,children:[(0,s.jsx)("div",{className:f().gradientOrb1}),(0,s.jsx)("div",{className:f().gradientOrb2}),(0,s.jsx)("div",{className:f().gradientOrb3})]}),y&&(0,s.jsx)(h,{type:y.type,message:y.message,onClose:()=>b(null)}),v&&(0,s.jsx)("div",{className:f().modalOverlay,children:(0,s.jsxs)("div",{className:f().modal,children:[(0,s.jsx)("button",{onClick:()=>w(!1),className:f().modalClose,children:(0,s.jsx)(c.A,{size:20})}),(0,s.jsxs)("div",{className:f().modalHeader,children:[(0,s.jsx)(r.A,{className:f().modalIcon}),(0,s.jsx)("h3",{className:f().modalTitle,children:"Link Your Accounts"})]}),(0,s.jsxs)("p",{className:f().modalDescription,children:["An account with ",(0,s.jsx)("strong",{children:k})," already exists. Enter your password to link your Microsoft account."]}),(0,s.jsxs)("div",{className:f().modalForm,children:[(0,s.jsxs)("div",{className:f().inputGroup,children:[(0,s.jsx)(d.A,{className:f().inputIcon}),(0,s.jsx)("input",{type:"password",value:I,onChange:e=>A(e.target.value),placeholder:"Enter your password",className:f().modalInput,disabled:Z})]}),(0,s.jsxs)("div",{className:f().modalActions,children:[(0,s.jsx)("button",{onClick:()=>{w(!1),A("")},className:f().modalButtonSecondary,disabled:Z,children:"Cancel"}),(0,s.jsx)("button",{onClick:X,className:f().modalButtonPrimary,disabled:Z||!I,children:Z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.A,{className:f().buttonLoader}),"Linking..."]}):"Link Accounts"})]})]})]})}),(0,s.jsxs)("div",{className:f().loginCard,children:[(0,s.jsxs)("div",{className:f().loginHeader,children:[(0,s.jsx)("div",{className:f().logoContainer,children:(0,s.jsx)("div",{className:f().logo,children:(0,s.jsx)("span",{className:f().logoText,children:"R"})})}),(0,s.jsx)("h1",{className:f().title,children:"Welcome Back"}),(0,s.jsx)("p",{className:f().subtitle,children:"Sign in to continue to your account"})]}),(0,s.jsxs)("div",{className:f().loginBody,children:[(0,s.jsxs)("button",{type:"button",onClick:R,disabled:Z,className:f().microsoftButton,children:[Z?(0,s.jsx)(_.A,{className:f().buttonLoader}):(0,s.jsxs)("svg",{className:f().microsoftIcon,viewBox:"0 0 23 23",fill:"none",children:[(0,s.jsx)("path",{d:"M0 0h11v11H0z",fill:"#f25022"}),(0,s.jsx)("path",{d:"M12 0h11v11H12z",fill:"#7fba00"}),(0,s.jsx)("path",{d:"M0 12h11v11H0z",fill:"#00a4ef"}),(0,s.jsx)("path",{d:"M12 12h11v11H12z",fill:"#ffb900"})]}),(0,s.jsx)("span",{children:Z?"Signing in...":"Continue with Microsoft"})]}),(0,s.jsx)("div",{className:f().divider,children:(0,s.jsx)("span",{className:f().dividerText,children:"or"})}),(0,s.jsxs)("form",{onSubmit:U,className:f().form,children:[(0,s.jsxs)("div",{className:f().formGroup,children:[(0,s.jsx)("label",{className:f().label,children:"Email Address"}),(0,s.jsxs)("div",{className:"".concat(f().inputWrapper," ").concat(S?f().inputError:""),children:[(0,s.jsx)(u.A,{className:f().inputIcon}),(0,s.jsx)("input",{type:"email",value:o,onChange:e=>{i(e.target.value),S&&Y(e.target.value)},className:f().input,placeholder:"you@example.com",disabled:Z,onBlur:()=>Y(o)})]}),S&&(0,s.jsx)("span",{className:f().fieldError,children:S})]}),(0,s.jsxs)("div",{className:f().formGroup,children:[(0,s.jsx)("label",{className:f().label,children:"Password"}),(0,s.jsxs)("div",{className:"".concat(f().inputWrapper," ").concat(B?f().inputError:""),children:[(0,s.jsx)(d.A,{className:f().inputIcon}),(0,s.jsx)("input",{type:x?"text":"password",value:l,onChange:e=>{p(e.target.value),B&&q(e.target.value)},className:f().input,placeholder:"Enter your password",disabled:Z,onBlur:()=>q(l)}),(0,s.jsx)("button",{type:"button",onClick:()=>L(!x),className:f().passwordToggle,tabIndex:-1,children:x?(0,s.jsx)(g.A,{size:18}):(0,s.jsx)(m.A,{size:18})})]}),B&&(0,s.jsx)("span",{className:f().fieldError,children:B})]}),(0,s.jsx)("button",{type:"submit",disabled:Z,className:f().submitButton,children:Z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.A,{className:f().buttonLoader}),"Signing in..."]}):"Sign In"})]}),(0,s.jsxs)("div",{className:f().signupPrompt,children:["Don't have an account?"," ",(0,s.jsx)("a",{href:"/register",className:f().signupLink,children:"Sign up for free"})]})]})]})]})}},5997:e=>{e.exports={pageContainer:"Login_pageContainer__nSfQY",backgroundAnimation:"Login_backgroundAnimation__h3LkF",gradientOrb1:"Login_gradientOrb1__W1t_I",gradientOrb2:"Login_gradientOrb2__GtcnY",gradientOrb3:"Login_gradientOrb3__pRvX0",float:"Login_float__ildeu",loginCard:"Login_loginCard___I2cN",slideUp:"Login_slideUp__IXhX7",loginHeader:"Login_loginHeader__cwjKD",logoContainer:"Login_logoContainer__fYrb5",logo:"Login_logo__jVfWx",pulse:"Login_pulse__cnrGd",logoText:"Login_logoText__maj_p",title:"Login_title__5ZhJ9",subtitle:"Login_subtitle__XZDoK",loginBody:"Login_loginBody__4CJ6O",microsoftButton:"Login_microsoftButton__2oxBk",microsoftIcon:"Login_microsoftIcon__JGe42",divider:"Login_divider__Q65u1",dividerText:"Login_dividerText__8PKk5",form:"Login_form__fRZLe",formGroup:"Login_formGroup__puH9y",label:"Login_label__Z_MWL",inputWrapper:"Login_inputWrapper__mDAxr",inputError:"Login_inputError__ISAUt",inputIcon:"Login_inputIcon__tGoXm",input:"Login_input__oToQq",passwordToggle:"Login_passwordToggle__Nhcrr",fieldError:"Login_fieldError__FHPE2",formOptions:"Login_formOptions__jj64n",rememberMe:"Login_rememberMe__ulKQ_",forgotPassword:"Login_forgotPassword__cuVqg",submitButton:"Login_submitButton__tBl_8",buttonLoader:"Login_buttonLoader__Jc8fG",spin:"Login_spin__76XAk",signupPrompt:"Login_signupPrompt__9mLf5",signupLink:"Login_signupLink__8Z_UZ",notification:"Login_notification__gzgsa",slideDown:"Login_slideDown__0xnGO",notificationIcon:"Login_notificationIcon__Mv2x3",notificationSuccess:"Login_notificationSuccess__owIas",notificationError:"Login_notificationError__IHfnk",notificationWarning:"Login_notificationWarning__vINn6",notificationInfo:"Login_notificationInfo__X_Ukq",notificationMessage:"Login_notificationMessage__6Ygs8",notificationClose:"Login_notificationClose__LY3YO",modalOverlay:"Login_modalOverlay__iCHZ4",fadeIn:"Login_fadeIn__EGGRg",modal:"Login_modal__5_j9e",modalSlideUp:"Login_modalSlideUp___YEzC",modalClose:"Login_modalClose__9Qo96",modalHeader:"Login_modalHeader__ui9x2",modalIcon:"Login_modalIcon__h0s1l",modalTitle:"Login_modalTitle__BBb10",modalDescription:"Login_modalDescription__6VTYf",modalForm:"Login_modalForm__H2pmP",modalInput:"Login_modalInput__6p_OS",modalActions:"Login_modalActions__WcDR1",modalButtonSecondary:"Login_modalButtonSecondary__iJSMC",modalButtonPrimary:"Login_modalButtonPrimary__enNEG",loadingOverlay:"Login_loadingOverlay__KDLqN",loadingSpinner:"Login_loadingSpinner____F0o",successAnimation:"Login_successAnimation__BYAjz",successPulse:"Login_successPulse__Vbkxb",hoverGrow:"Login_hoverGrow__2Cnnf"}}}]);